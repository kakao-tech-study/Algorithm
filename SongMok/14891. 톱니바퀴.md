- 14891번. 톱니바퀴

    ```python
    gear = []
    for _ in range(4):
        gear.append(list(input()))
    n = int(input())
    r = []
    cnt = 0
    for _ in range(n):
        num, d = map(int, input().split())
        r.append((num, d))
    
    def rotate(num, d):
        rotation = [0] * 4
        rotation[num] = d
    
        for i in range(num, 0, -1):
            if gear[i][6] != gear[i-1][2]:
                rotation[i-1] = -rotation[i]
            else:
                break
    
        for j in range(num, 3):
            if gear[j][2] != gear[j+1][6]:
                rotation[j+1] = -rotation[j]
            else:
                break
    
        for k in range(4):
            if rotation[k] == -1:
                gear[k] = gear[k][1:] + [gear[k][0]]
            elif rotation[k] == 1:
                gear[k] = [gear[k][-1]] + gear[k][0:7]
    
    for num, d in r:
        rotate(num - 1, d)
    
    if gear[0][0] == '1':
        cnt += 1
    if gear[1][0] == '1':
        cnt += 2
    if gear[2][0] == '1':
        cnt += 4
    if gear[3][0] == '1':
        cnt += 8
    
    print(cnt)
    ```

  이 문제는 톱니바퀴가 회전을 하고, 그에 따른 12시 즉,0번째의 숫자를 보고 점수를 출력하는 문제이다.

  처음엔 단순히 주어진 톱니바퀴를 돌리는 것까지 구현했지만, “회전 전파” 를 고려해야 한다는 점이 어려웠다.

  **시계 방향 회전(1)** 과 **반시계 방향 회전(-1)** 의 차이를 생각하며 문자열 슬라이싱을 활용했다.

    1. **시계 방향 (1)** → 마지막 문자를 앞으로 이동 (`gear[-1] + gear[0:7]`)
    2. **반시계 방향 (-1)** → 첫 번째 문자를 맨 뒤로 이동 (`gear[1:] + gear[0]`)

  이 부분은 `gear[num-1]`을 직접 수정하는 방식으로 처리했다.

  하지만 **톱니바퀴는 서로 맞닿아 있는 부분을 비교해야 한다는 점**이 핵심이었다.

  `gear[i][2]` (오른쪽 극) vs `gear[i+1][6]` (왼쪽 극)

  이제 회전하기 전에 **각 톱니바퀴의 맞닿은 극을 비교하여 회전이 전파될지 결정**해야 한다.

  톱니바퀴는 **서로 맞닿은 부분의 극이 다를 때만 회전이 전파**된다.

  따라서 **톱니가 맞닿아 있는 곳을 먼저 확인한 후, 회전 정보를 저장하는 방식**을 선택했다.

    1. **회전할 톱니바퀴를 rotation 리스트에 저장**
    2. rotation[i] = 1 → 시계 방향 회전
    3. rotation[i] = -1 → 반시계 방향 회전
    4. rotation[i] = 0 → 회전 없음
    5. 먼저 **회전할 톱니의 방향을 정한 후, 왼쪽과 오른쪽으로 전파**
    6. 왼쪽 (i-1)은 현재 방향의 **반대 방향으로 회전**
    7. 오른쪽 (i+1)도 현재 방향의 **반대 방향으로 회전**
    8. 극이 같다면 **전파 중단**

  이 과정을 거쳐 회전할 톱니바퀴를 모두 구한 후, **한 번에 회전**을 적용했다.

  이제 회전해야 할 톱니바퀴들을 **한 번에 회전**하면 된다.

  앞서 저장한 rotation 리스트를 참고하여 **각 톱니바퀴를 회전**시킨다.

    1. rotation[i] == -1 → 반시계 방향 회전
    2. rotation[i] == 1 → 시계 방향 회전

  이렇게 하면 **각 톱니바퀴의 상태를 정확하게 유지하면서 동시에 회전이 적용**된다.

  마지막으로 각 톱니바퀴의 **12시 방향에 있는 값이 ‘1’인지 확인**하여 점수를 계산했다.

    ```
    예제 입력 1 
    10101111
    01111101
    11001110
    00000010
    2
    3 -1
    1 1
    예제 출력 1 
    7
    ```